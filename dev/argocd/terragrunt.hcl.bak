include "root" {
  path = find_in_parent_folders()
}

terraform {
  source = "../../modules/argocd"
}

dependency "eks" {
  config_path = "../eks"
}

# ArgoCD needs ingress-nginx to be deployed first (for UI access)
dependency "ingress_nginx" {
  config_path = "../ingress-nginx"
}

locals {
  env = read_terragrunt_config(find_in_parent_folders("env.hcl"))
}

inputs = {
  cluster_name        = local.env.locals.cluster_name
  environment         = local.env.locals.environment
  namespaces          = local.env.locals.namespaces
  helm_charts_repo_url = "https://github.com/edenbarkan/helm-charts.git"  # Update this!
  domain              = "argocd.dev.example.com"  # Update this!
  tags                = local.env.locals.tags
}
